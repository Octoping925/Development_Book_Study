# 아이템 47. 반환 타입으로는 스트림보다 컬렉션이 낫다

API를 스트림만 반환하도록 짜놓으면 반환된 스트림을 `for-each`로 반복하길 원하는 사용자는 당연히 불만을 토로할 것이다.

스트림이 Iterable가 정의한 추상 메소드를 포함함에도 불구하고 for-each로 스트림을 반복할 수 없는 까닭은 Stream이 `Iterable`을 확장하지 않았기 때문이다.

객체 시퀀스를 반환하는 메소드를 작성하는데, 이 메소드가 오직 스트림 파이프라인에서만 쓰일 걸 안다면 마음 놓고 스트림을 반환하자.

원소 시퀀스를 반환하는 공개 API의 반환 타입에는 Collection이나 그 하위 타입을 쓰는 게 일반적으로 최선이다.

Arrays 역시 `Arrays.asList`와 `Stream.of` 메소드로 손쉽게 반복과 스트림을 지원할 수 있다.

반환하는 시퀀스의 크기가 메모리에 올려도 안전할 정도로 작다면 ArrayList나 HashSet 같은 표준 컬렉션 구현체를 반환하는 게 최선일 수 있다. **하지만 단지 컬렉션을 반환한다는 이유로 덩치 큰 시퀀스를 메모리에 올려서는 안된다**

## 정리

- 원소 시퀀스를 반환하는 메소드를 작성할 때는, 이를 스트림으로 처리하기를 원하는 사용자와 반복으로 처리하기를 원하는 사용자 모두를 만족시킬 수 있는 API를 작성하는 게 좋다.

- 컬렉션을 반환하는 게 불가능한다면 스트림과 Iterable 중 더 자연스러운 것을 반환하라.
