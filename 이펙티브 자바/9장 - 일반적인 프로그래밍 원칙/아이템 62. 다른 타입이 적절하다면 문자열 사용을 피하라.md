# 아이템 62. 다른 타입이 적절하다면 문자열 사용을 피하라

문자열은 텍스트를 표현하도록 설계되었다. 하지만 문자열은 워낙 흔하고 또 자바가 잘 지원해주어 원래 의도하지 않은 용도로도 쓰이는 경향이 있다.

## 문자열은 다른 값 타입을 대신하기에 적합하지 않다

많은 사람들이 파일, 네트워크, 키보드 입력으로부터 데이터를 받을 때 주로 문자열을 사용한다. 입력받을 데이터가 진짜 문자열일 때에만 그렇게 하는 것이 좋다.

받은 데이터가 수치형이라면 int, float, BigInteger 등 적당한 수치 타입으로 변환하고, '예/아니오' 질문의 답이라면 적절한 열거 타입이나 boolean으로 변환해야 한다.

문자열은 열거 타입을 대신하기에 적합하지 않고, 혼합 타입을 대신하기에도 적합하지 않다.

## 문자열은 혼합 타입을 대신하기 적합하지 않다

```java
String compoundKey = className + "#" + i.next();
```

이는 단점이 많은 방식이다. 혹여 두 요소를 구분하는 문자 '#'가 두 요소 중 하나에서 쓰였다면 혼란스러운 결과를 초래한다.

적절한 `equals`, `toString`, `compareTo`도 제공할 수 없으며, String이 제공하는 기능에만 의존해야 한다. 그래서 차라리 전용 클래스를 새로 만드는 편이 낫다. 이런 클래스는 보통 private 정적 멤버 클래스로 선언한다.

## 문자열은 권한을 표현하기에 적합하지 않다

권한을 문자열로 표현하는 경우가 종종 있다.

예를 들어 스레드 지역 변수 기능을 설계할 때 (각 스레드가 자신만의 변수를 갖게 해주는 기능), 이 기능을 설계해야 했던 여러 프로그래머가 독립적으로 방법을 모색하다가 종국에는 똑같은 설계에 이르렀다.

바로 클라이언트가 제공한 문자열 키로 스레드별 지역 변수를 식별한 것이다.

```java
public class ThreadLocal {
    private ThreadLocal() { } // 객체 생성 불가

    // 현재 스레드의 값을 키로 저장한다.
    public static void set(String key, Object value);

    // 현재 스레드의 값을 키로 반환한다.
    public static Object get(String key);
}
```

이 방식의 문제는 스레드 구분용 문자열 키가 전역 이름공간에서 공유된다는 점이다.

이 방식이 제대로 동작하려면 각 클라이언트가 고유한 키를 제공해야 한다. 하지만 그렇지 않을 경우 의도치 않게 같은 변수를 공유해서 모두 제대로 동작하지 않을 것이며 보안도 취약하다.

이 대신 문자열 대신 위조할 수 없는 키를 사용하면 해결 된다.

```java
public class ThreadLocal {
    private ThreadLocal() { } // 객체 생성 불가

    public static class Key { Key() { } }

    public static Key getKey() {
        return new Key();
    }

    public static void set(Key key, Object value);
    public static Object get(Key key);
}
```

## 정리

- 더 적합한 데이터 타입이 있거나 새로 작성할 수 있다면, 문자열을 쓰는 일은 피해야 한다.
